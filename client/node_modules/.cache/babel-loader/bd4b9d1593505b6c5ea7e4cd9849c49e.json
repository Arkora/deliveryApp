{"ast":null,"code":"import { ADD_CART, REMOVE_CART, DELETE_INGRENDIENT, UPDATE_QUANTITY } from \"../constants/ActionTypes\";\nexport const orderReducer = (state = {\n  products: [],\n  total: 0\n}, {\n  type,\n  payload\n}) => {\n  switch (type) {\n    case ADD_CART:\n      let exists = state.products.find(item => item.id === payload.id);\n      let price = 0;\n      let product = {};\n      let addTotal = state.total;\n      let subTotal = 0;\n\n      if (!exists) {\n        subTotal = Number(payload.price) * Number(payload.quantity);\n        product = {\n          id: payload.id,\n          title: payload.title,\n          quantity: payload.quantity,\n          price: Number(payload.price),\n          subTotal: subTotal,\n          ingrendients: payload.ingrendients\n        };\n        addTotal += subTotal;\n        state.products.push(product);\n      } else {\n        product = exists;\n        product.quantity += payload.quantity;\n        subTotal = Number(payload.price) * Number(payload.quantity);\n        product.subTotal += subTotal;\n        addTotal += subTotal;\n      }\n\n      return { ...state,\n        products: [...state.products],\n        total: addTotal\n      };\n\n    case REMOVE_CART:\n      let clone = state.products;\n      let productToDelete = state.products.find(item => item.id === payload);\n      let tempTotal = state.total - productToDelete.price;\n      clone.splice(clone.indexOf(productToDelete), 1);\n      return { ...state,\n        products: clone,\n        total: tempTotal\n      };\n\n    case DELETE_INGRENDIENT:\n      let productToUpdate = state.products.find(item => item.id === payload.id);\n      let ingrendients = productToUpdate.ingrendients.filter(item => item !== payload.item);\n      productToUpdate.ingrendients = ingrendients;\n      return { ...state,\n        products: [...state.products]\n      };\n\n    case UPDATE_QUANTITY:\n      let newProduct = state.products.find(item => item.id === payload.id);\n      let newQuantity = payload.quantity;\n      let newSubTotal = newProduct.price * newQuantity;\n      let newTotal = 0;\n      newProduct.quantity = newQuantity;\n      newProduct.subTotal = newSubTotal;\n      state.products.forEach(element => {\n        newTotal += element.subTotal;\n      });\n      return { ...state,\n        products: [...state.products],\n        total: newTotal\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["C:/Users/PC/Desktop/DeliveryApp/client/src/redux/reducers/CartReducer.js"],"names":["ADD_CART","REMOVE_CART","DELETE_INGRENDIENT","UPDATE_QUANTITY","orderReducer","state","products","total","type","payload","exists","find","item","id","price","product","addTotal","subTotal","Number","quantity","title","ingrendients","push","clone","productToDelete","tempTotal","splice","indexOf","productToUpdate","filter","newProduct","newQuantity","newSubTotal","newTotal","forEach","element"],"mappings":"AAAA,SAASA,QAAT,EAAkBC,WAAlB,EAA8BC,kBAA9B,EAAiDC,eAAjD,QAAwE,0BAAxE;AAIE,OAAO,MAAMC,YAAY,GAAG,CAACC,KAAK,GAAG;AAACC,EAAAA,QAAQ,EAAC,EAAV;AAAaC,EAAAA,KAAK,EAAC;AAAnB,CAAT,EAAgC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAhC,KAAsD;AAIhF,UAAQD,IAAR;AACE,SAAKR,QAAL;AACE,UAAIU,MAAM,GAAGL,KAAK,CAACC,QAAN,CAAeK,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAAlD,CAAb;AACA,UAAIC,KAAK,GAAG,CAAZ;AACA,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIC,QAAQ,GAAGX,KAAK,CAACE,KAArB;AACA,UAAIU,QAAQ,GAAG,CAAf;;AACA,UAAG,CAACP,MAAJ,EAAY;AACVO,QAAAA,QAAQ,GAAIC,MAAM,CAACT,OAAO,CAACK,KAAT,CAAN,GAAsBI,MAAM,CAACT,OAAO,CAACU,QAAT,CAAxC;AACAJ,QAAAA,OAAO,GAAG;AAACF,UAAAA,EAAE,EAACJ,OAAO,CAACI,EAAZ;AAAeO,UAAAA,KAAK,EAACX,OAAO,CAACW,KAA7B;AAAmCD,UAAAA,QAAQ,EAACV,OAAO,CAACU,QAApD;AAA6DL,UAAAA,KAAK,EAACI,MAAM,CAACT,OAAO,CAACK,KAAT,CAAzE;AAAyFG,UAAAA,QAAQ,EAACA,QAAlG;AAA2GI,UAAAA,YAAY,EAACZ,OAAO,CAACY;AAAhI,SAAV;AACAL,QAAAA,QAAQ,IAAGC,QAAX;AACAZ,QAAAA,KAAK,CAACC,QAAN,CAAegB,IAAf,CAAoBP,OAApB;AACD,OALD,MAKK;AACHA,QAAAA,OAAO,GAAGL,MAAV;AACAK,QAAAA,OAAO,CAACI,QAAR,IAAoBV,OAAO,CAACU,QAA5B;AACAF,QAAAA,QAAQ,GAAGC,MAAM,CAACT,OAAO,CAACK,KAAT,CAAN,GAAsBI,MAAM,CAACT,OAAO,CAACU,QAAT,CAAvC;AACAJ,QAAAA,OAAO,CAACE,QAAR,IAAoBA,QAApB;AACAD,QAAAA,QAAQ,IAAGC,QAAX;AACD;;AAED,aAAM,EAAC,GAAGZ,KAAJ;AAAUC,QAAAA,QAAQ,EAAC,CAAC,GAAGD,KAAK,CAACC,QAAV,CAAnB;AAAuCC,QAAAA,KAAK,EAACS;AAA7C,OAAN;;AAKF,SAAKf,WAAL;AACE,UAAIsB,KAAK,GAAGlB,KAAK,CAACC,QAAlB;AACA,UAAIkB,eAAe,GAAGnB,KAAK,CAACC,QAAN,CAAeK,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYJ,OAA1C,CAAtB;AAEA,UAAIgB,SAAS,GAAGpB,KAAK,CAACE,KAAN,GAAYiB,eAAe,CAACV,KAA5C;AAEAS,MAAAA,KAAK,CAACG,MAAN,CAAaH,KAAK,CAACI,OAAN,CAAcH,eAAd,CAAb,EAA4C,CAA5C;AACA,aAAO,EAAC,GAAGnB,KAAJ;AAAUC,QAAAA,QAAQ,EAACiB,KAAnB;AAAyBhB,QAAAA,KAAK,EAACkB;AAA/B,OAAP;;AAEF,SAAKvB,kBAAL;AACE,UAAI0B,eAAe,GAAGvB,KAAK,CAACC,QAAN,CAAeK,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAAlD,CAAtB;AACA,UAAIQ,YAAY,GAAGO,eAAe,CAACP,YAAhB,CAA6BQ,MAA7B,CAAqCjB,IAAD,IAAUA,IAAI,KAAKH,OAAO,CAACG,IAA/D,CAAnB;AACAgB,MAAAA,eAAe,CAACP,YAAhB,GAA8BA,YAA9B;AACA,aAAM,EAAC,GAAGhB,KAAJ;AAAUC,QAAAA,QAAQ,EAAC,CAAC,GAAGD,KAAK,CAACC,QAAV;AAAnB,OAAN;;AAEF,SAAKH,eAAL;AACE,UAAI2B,UAAU,GAAGzB,KAAK,CAACC,QAAN,CAAeK,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAAlD,CAAjB;AACA,UAAIkB,WAAW,GAAGtB,OAAO,CAACU,QAA1B;AACA,UAAIa,WAAW,GAAGF,UAAU,CAAChB,KAAX,GAAmBiB,WAArC;AACA,UAAIE,QAAQ,GAAG,CAAf;AACAH,MAAAA,UAAU,CAACX,QAAX,GAAsBY,WAAtB;AACAD,MAAAA,UAAU,CAACb,QAAX,GAAsBe,WAAtB;AACA3B,MAAAA,KAAK,CAACC,QAAN,CAAe4B,OAAf,CAAuBC,OAAO,IAAI;AAChCF,QAAAA,QAAQ,IAAIE,OAAO,CAAClB,QAApB;AACD,OAFD;AAGA,aAAM,EAAC,GAAGZ,KAAJ;AAAUC,QAAAA,QAAQ,EAAC,CAAC,GAAGD,KAAK,CAACC,QAAV,CAAnB;AAAuCC,QAAAA,KAAK,EAAC0B;AAA7C,OAAN;;AAGF;AACE,aAAO5B,KAAP;AAtDJ;AAwDD,CA5DM","sourcesContent":["import { ADD_CART,REMOVE_CART,DELETE_INGRENDIENT,UPDATE_QUANTITY } from \"../constants/ActionTypes\";\r\n\r\n\r\n\r\n  export const orderReducer = (state = {products:[],total:0}, { type, payload }) => {\r\n\r\n    \r\n    \r\n    switch (type) {\r\n      case ADD_CART:\r\n        let exists = state.products.find((item) => item.id === payload.id)\r\n        let price = 0        \r\n        let product = {}\r\n        let addTotal = state.total\r\n        let subTotal = 0\r\n        if(!exists) {\r\n          subTotal =  Number(payload.price)*Number(payload.quantity)\r\n          product = {id:payload.id,title:payload.title,quantity:payload.quantity,price:Number(payload.price),subTotal:subTotal,ingrendients:payload.ingrendients}\r\n          addTotal +=subTotal\r\n          state.products.push(product)\r\n        }else{\r\n          product = exists\r\n          product.quantity += payload.quantity\r\n          subTotal = Number(payload.price)*Number(payload.quantity)\r\n          product.subTotal += subTotal\r\n          addTotal +=subTotal\r\n        }\r\n\r\n        return{...state,products:[...state.products],total:addTotal}\r\n         \r\n         \r\n         \r\n        \r\n      case REMOVE_CART:\r\n        let clone = state.products;\r\n        let productToDelete = state.products.find((item) => item.id === payload)\r\n             \r\n        let tempTotal = state.total-productToDelete.price           \r\n\r\n        clone.splice(clone.indexOf(productToDelete),1);\r\n        return {...state,products:clone,total:tempTotal};\r\n\r\n      case DELETE_INGRENDIENT:               \r\n        let productToUpdate = state.products.find((item) => item.id === payload.id)\r\n        let ingrendients = productToUpdate.ingrendients.filter((item) => item !== payload.item)\r\n        productToUpdate.ingrendients =ingrendients\r\n        return{...state,products:[...state.products]}\r\n\r\n      case UPDATE_QUANTITY:\r\n        let newProduct = state.products.find((item) => item.id === payload.id)\r\n        let newQuantity = payload.quantity\r\n        let newSubTotal = newProduct.price * newQuantity  \r\n        let newTotal = 0       \r\n        newProduct.quantity = newQuantity\r\n        newProduct.subTotal = newSubTotal\r\n        state.products.forEach(element => {\r\n          newTotal += element.subTotal\r\n        });\r\n        return{...state,products:[...state.products],total:newTotal}\r\n\r\n\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n"]},"metadata":{},"sourceType":"module"}